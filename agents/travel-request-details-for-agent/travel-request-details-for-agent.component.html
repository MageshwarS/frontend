<app-agent-header></app-agent-header>


<!-- ONLY FOR  AGENT -->

<div id="requests" [hidden]="flag">
    <label for="Employee Name">Employee Name
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</label>
    {{travelRequests.employees.employeeName}}
    <br> <br>
    <label for="Current Project"> Current Project
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</label>
    {{travelRequests.employees.projectName}}
    <br> <br>
    <label for="Role">Role
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</label>
    {{travelRequests.employees.role}}
    <br> <br>
    <label for="Email Address">Email Address
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</label>
    {{travelRequests.employees.email}}
    <br> <br>
    <label for="Boarding Point">Boarding Point
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</label>
    {{travelRequests.boardingPoint}}
    <br> <br>
    <label
        for="Destination">Destination&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</label>
    {{travelRequests.destination}}
    <br> <br>
    <label for="From Date">From Date
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</label>
    <!-- {{ travelRequests.fromDate.toString().replace(travelRequests.fromDate.toString().slice(10), '') }} -->
    {{ travelRequests.fromDate.toString().split('T')[0] }}
    <br> <br>
    <label for="To Date">To Date
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</label>
    <!-- {{travelRequests.toDate.toString().replace(travelRequests.toDate.toString().slice(10), '')}} -->
    {{ travelRequests.toDate.toString().split('T')[0] }}
    <br> <br>
    <label for="Transportation Mode">Transportation Mode &nbsp;&nbsp; :</label>
    {{travelRequests.transportationMode}}
    <br><br>
    <!-- <label *ngIf="travelRequests.agentApproval=='rejected'" for="comments">Comments &nbsp;&nbsp; :{{travelRequests.comments}}</label> -->
    
    

    <!-- <label for="International travel allowed">international Travel Allowed &nbsp;&nbsp; :</label>
    {{travelRequests.employees.slab.internationalTravelAllowed}}
    <br> <br> -->

    <!-- <label for="Agent Approval">Agent Approval
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</label>
    {{travelRequests.agentApproval}} -->



    
    <!-- <label for="Manager Approval" >Manager Approval &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  :</label>
 {{travelRequests.managerApproval}}
 <br> <br>  -->

    <!-- <label for="Director Approval">Director Approval &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; :</label>
    {{travelRequests.directorApproval}} -->
      
    <label [style.color]="travelRequests.documentStatus=='uploaded'? 'green' : 'red' " *ngIf="travelRequests.agentApproval!='pending' && travelRequests.directorApproval=='approved'" for="Documant Status">{{travelRequests.documentStatus=='uploaded' ? 'Documents Uploaded :' : 'Documents Required!'}} &nbsp; <a *ngIf="travelRequests.agentApproval!='pending' && travelRequests.directorApproval=='approved' && travelRequests.documentStatus=='uploaded'" target="_blank"  href="http://localhost:8081/travelRequests/download/{{travelRequests.travelRequestId}}">View Document</a></label>

    <!-- <label *ngIf="!approve && slabValidated" for="comments">Comments for rejecting :</label>
    <input *ngIf="!approve && slabValidated" type="text" name="comments" [(ngModel)]="travelRequests.comments"> -->
    <h3 [hidden]="approve && !slabValidated" style="white-space: pre-line; color: red;">{{slabExceedReason}}</h3>
    <div *ngIf="travelRequests.agentApproval=='pending'">
        <div [hidden]="slabValidated">
        <label for="Estimate">Estimate</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:
        <input type="number" [(ngModel)]="travelRequests.estimate">
        <br><br>
        <button id="button" (click)="validateSlab()">Validate</button>
        </div>
        
        <div [hidden]="!slabValidated">
            <button id="button" (click)="updateapprovalbyAgent('approved')" [hidden]="!approve">Approve</button>
            
            <button id="button" (click)="updateapprovalbyAgent('rejected')" [hidden]="approve">Reject</button>
        </div>
        
    </div>

    
    <div *ngIf="travelRequests.agentApproval!='pending' && travelRequests.directorApproval=='approved'">
        <!-- <button> Request Documents</button> -->
        <button id="book" [disabled]="travelRequests.documentStatus!='uploaded'" (click)="book()"> Book</button>
    </div>


</div>

<div id="requests"  [hidden]="!flag">
    <h3>{{message}}</h3>
</div>

<app-employee-footer></app-employee-footer>